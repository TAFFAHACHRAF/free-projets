"use strict";(self.webpackChunkexamen=self.webpackChunkexamen||[]).push([[139],{5139:(N,m,a)=>{a.r(m),a.d(m,{AccountModule:()=>F});var l=a(4755),g=a(753),f=a(262),A=a(2843),t=a(9523),u=a(5030),p=a(9467),h=a(3144);let _=(()=>{class n{constructor(o){this.http=o,this.url=p.N.backendHost+"/customers"}getAccount(o,e,r){return this.http.get(p.N.backendHost+"/accounts/"+o+"/pageOperations?page="+e+"&size="+r)}debit(o,e,r){return this.http.post(p.N.backendHost+"/accounts/debit",{accountId:o,amount:e,description:r})}credit(o,e,r){return this.http.post(p.N.backendHost+"/accounts/credit",{accountId:o,amount:e,description:r})}transfer(o,e,r,i){return this.http.post(p.N.backendHost+"/accounts/transfer",{accountSource:o,accountDestination:e,amount:r,description:i})}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(h.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"div",17),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw(2);t.xp6(2),t.Oqu(o.errorMessage)}}function x(n,c){1&n&&t._uU(0," Loading ... ")}function T(n,c){if(1&n&&(t.YNc(0,Z,3,1,"ng-container",15),t.YNc(1,x,1,0,"ng-template",null,16,t.W1O)),2&n){const o=t.MAs(2),e=t.oxw();t.Q6J("ngIf",e.errorMessage)("ngIfElse",o)}}function v(n,c){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",22),t._uU(9),t.ALo(10,"number"),t.qZA()()),2&n){const o=c.$implicit;t.xp6(2),t.Oqu(o.id),t.xp6(2),t.Oqu(t.xi3(5,4,o.operationDate,"dd-MM-yyyy:HH-mm-ss")),t.xp6(3),t.Oqu(o.type),t.xp6(2),t.Oqu(t.xi3(10,7,o.amount,"1.2-2"))}}function b(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"li")(1,"a",23),t.NdJ("click",function(){const i=t.CHM(o).index,d=t.oxw(2);return t.KtG(d.gotoPage(i))}),t._uU(2),t.qZA()()}if(2&n){const o=c.index,e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",o==e.currentPage?"btn-info":"btn-outline-info"),t.xp6(1),t.Oqu(o)}}const I=function(){return[]};function C(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"div",18)(2,"label"),t._uU(3,"Account ID :"),t.qZA(),t.TgZ(4,"label")(5,"strong"),t._uU(6),t.qZA()()(),t.TgZ(7,"div",18)(8,"label"),t._uU(9,"Balance :"),t.qZA(),t.TgZ(10,"label")(11,"strong"),t._uU(12),t.ALo(13,"number"),t.qZA()()(),t.TgZ(14,"table",19)(15,"thead")(16,"th"),t._uU(17,"ID"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Date"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Type"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Amount"),t.qZA()(),t.TgZ(24,"tbody"),t.YNc(25,v,11,10,"tr",20),t.qZA()(),t.TgZ(26,"ul",21),t.YNc(27,b,3,2,"li",20),t.qZA(),t.BQk()),2&n){const o=c.ngIf;t.xp6(6),t.Oqu(o.accountId),t.xp6(6),t.Oqu(t.xi3(13,4,o.balance,"1.2-2")),t.xp6(13),t.Q6J("ngForOf",o.accountOperationDTOS),t.xp6(2),t.Q6J("ngForOf",t.DdM(7,I).constructor(o.totalPages))}}function U(n,c){1&n&&(t.TgZ(0,"div",31)(1,"label",32),t._uU(2,"Account Destination :"),t.qZA(),t._UZ(3,"input",37),t.qZA())}function S(n,c){if(1&n){const o=t.EpF();t.TgZ(0,"div",3)(1,"div",4),t._uU(2,"Operations"),t.qZA(),t.TgZ(3,"div",5)(4,"form",24),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.handleAccountOperation())}),t.TgZ(5,"div",25),t._UZ(6,"input",26),t.TgZ(7,"label",27),t._uU(8,"DEBIT:"),t.qZA()(),t.TgZ(9,"div",25),t._UZ(10,"input",28),t.TgZ(11,"label",27),t._uU(12,"CREDIT:"),t.qZA()(),t.TgZ(13,"div",25),t._UZ(14,"input",29),t.TgZ(15,"label",27),t._uU(16,"TRANSFER:"),t.qZA()(),t.YNc(17,U,4,0,"div",30),t.TgZ(18,"div",31)(19,"label",32),t._uU(20,"Amount :"),t.qZA(),t._UZ(21,"input",33),t.qZA(),t.TgZ(22,"div",31)(23,"label",32),t._uU(24,"Description :"),t.qZA(),t._UZ(25,"input",34),t.qZA(),t.TgZ(26,"div",35)(27,"button",36),t._uU(28,"Save Operation"),t.qZA()()()()()}if(2&n){const o=t.oxw();t.xp6(4),t.Q6J("formGroup",o.operationFromGroup),t.xp6(13),t.Q6J("ngIf","TRANSFER"==o.operationFromGroup.value.operationType)}}const y=[{path:"",component:(()=>{class n{constructor(o,e){this.fb=o,this.accountService=e,this.currentPage=0,this.pageSize=5}ngOnInit(){this.accountFormGroup=this.fb.group({accountId:this.fb.control("")}),this.operationFromGroup=this.fb.group({operationType:this.fb.control(null),amount:this.fb.control(0),description:this.fb.control(null),accountDestination:this.fb.control(null)})}handleSearchAccount(){this.accountObservable=this.accountService.getAccount(this.accountFormGroup.value.accountId,this.currentPage,this.pageSize).pipe((0,f.K)(e=>(this.errorMessage=e.message,(0,A._)(e))))}gotoPage(o){this.currentPage=o,this.handleSearchAccount()}handleAccountOperation(){let o=this.accountFormGroup.value.accountId,e=this.operationFromGroup.value.operationType,r=this.operationFromGroup.value.amount,i=this.operationFromGroup.value.description,d=this.operationFromGroup.value.accountDestination;"DEBIT"==e?this.accountService.debit(o,r,i).subscribe({next:s=>{alert("Success Credit"),this.operationFromGroup.reset(),this.handleSearchAccount()},error:s=>{console.log(s)}}):"CREDIT"==e?this.accountService.credit(o,r,i).subscribe({next:s=>{alert("Success Debit"),this.operationFromGroup.reset(),this.handleSearchAccount()},error:s=>{console.log(s)}}):"TRANSFER"==e&&this.accountService.transfer(o,d,r,i).subscribe({next:s=>{alert("Success Transfer"),this.operationFromGroup.reset(),this.handleSearchAccount()},error:s=>{console.log(s)}})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(u.qu),t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-a-accounts"]],decls:21,vars:5,consts:[[1,"container","p-4",2,"width","1350px"],[1,"row"],[1,"col","col-md-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"input-group"],[1,"input-group-text"],["type","text","formControlName","accountId",1,"form-control"],[1,"btn","btn-info"],[1,"bi","bi-search"],["errorTemplate",""],[4,"ngIf"],["class","card",4,"ngIf"],[4,"ngIf","ngIfElse"],["loading",""],[1,"text-danger"],[1,"mb-2"],[1,"table"],[4,"ngFor","ngForOf"],[1,"nav","nav-pills"],[1,"text-end"],[1,"btn","ms-1","mt-1",3,"ngClass","click"],["method","post",3,"formGroup","ngSubmit"],[1,"form-check","form-check-inline"],["type","radio","formControlName","operationType","value","DEBIT",1,"form-check-input"],[1,"form-check-label"],["type","radio","formControlName","operationType","value","CREDIT",1,"form-check-input"],["type","radio","formControlName","operationType","value","TRANSFER",1,"form-check-input"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","amount",1,"form-control"],["type","text","formControlName","description",1,"form-control"],[1,"d-grid","mb-3"],[1,"btn","btn-success"],["type","text","formControlName","accountDestination",1,"form-control"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Accounts"),t.qZA(),t.TgZ(6,"div",5)(7,"form",6),t.NdJ("ngSubmit",function(){return e.handleSearchAccount()}),t.TgZ(8,"div",7)(9,"label",8),t._uU(10,"Account Id :"),t.qZA(),t._UZ(11,"input",9),t.TgZ(12,"button",10),t._UZ(13,"i",11),t._uU(14," Search "),t.qZA()()(),t.YNc(15,T,3,2,"ng-template",null,12,t.W1O),t.YNc(17,C,28,8,"ng-container",13),t.ALo(18,"async"),t.qZA()()(),t.TgZ(19,"div",2),t.YNc(20,S,29,2,"div",14),t.qZA()()()),2&o&&(t.xp6(7),t.Q6J("formGroup",e.accountFormGroup),t.xp6(10),t.Q6J("ngIf",t.lcZ(18,3,e.accountObservable)),t.xp6(3),t.Q6J("ngIf",e.accountObservable))},dependencies:[l.mk,l.sg,l.O5,u._Y,u.Fj,u._,u.JJ,u.JL,u.sg,u.u,l.Ov,l.JJ,l.uU]}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(y),g.Bz]}),n})(),F=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,q,u.u5,u.UX]}),n})()}}]);